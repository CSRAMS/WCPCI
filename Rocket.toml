# This is for testing; production stuff should be generated with Nix or written manually
[default]
ident = "WCPC"

[default.databases.sqlite_db]
url = "./database.sqlite"

[default.oauth.github]
provider = "GitHub"

[default.oauth.google]
provider = "Google"
redirect_uri = "http://localhost:8000/auth/google/callback"

[debug]
url = "http://localhost:8000"
secret_key = "12345678901234567890123456789012345678901234"
template_dir = "frontend/dist"
public_dir = "public"
admins = [ "bwc9876@example.com" ]
timezone = "America/New_York"
# log_level = "debug"

[debug.saml]
entity_id = "urn:wcpc:saml-debugging"
idp_meta_url = "https://mocksaml.com/api/namespace/wcpc_testing_provider/saml/metadata"
contact_person = "Ben"
contact_email = "bwc9876@example.org"
contact_telephone = "555-555-5555"
organization = "WCPC"

[debug.saml.attrs]
display_name = "firstName"
email = "email"

[debug.run]
max_program_length = 100000
default_language = "python"

[debug.run.isolation]
workers_parent = "/tmp"
include_bins = [ "cc", "ls" ]
env = { GABAGOOL = "hello" }

[[debug.run.isolation.bind_mounts]]
src = "/nix/store"

[[debug.run.isolation.bind_mounts]]
src = "/bin/sh"

[[debug.run.isolation.bind_mounts]]
src = "/usr/bin/env"

[debug.run.isolation.limits]
tmpfs_size = "3%"
hard_timeout_internal_secs = 1
hard_timeout_user_secs = 5
hard_cpu_limit_secs = 5
hard_memory_limit_bytes = 500000000 # 500 MB
max_fds = 20


[debug.run.isolation.seccomp]
# mismatch_action = { action = "log" }

# -- Bash

[debug.run.languages.bash.display]
name = "Bash"
default_code = """
echo "Hello, World!"
"""
tabler_icon = "terminal"
monaco_contribution = "shell"

[debug.run.languages.bash.runner]
file_name = "main.sh"
run_cmd = { binary = "bash", args = [ "./main.sh" ] }


# -- Python

[debug.run.languages.python.display]
name = "Python"
default_code = """

print("Hello, World!")

"""
tabler_icon = "brand-python"
monaco_contribution = "python"

[debug.run.languages.python.runner]
file_name = "main.py"
run_cmd = { binary = "python", args = [ "./main.py" ] }

# -- Rust

[debug.run.languages.rust.display]
name = "Rust"
default_code = """
pub fn main() {
    println!("Hello, World!");
}
"""
tabler_icon = "brand-rust"
monaco_contribution = "rust"

[debug.run.languages.rust.runner]
file_name = "main.rs"
include_bins = [ "cc" ]
compile_cmd = { binary = "rustc", args = [ "main.rs", "-o", "main" ] }
run_cmd = { binary = "./main" }

# -- Java

[debug.run.languages.java.display]
name = "Java"
default_code = """
public class Man {
    public static void main(String[] args) {
        System.out.println("Hello, World!");
    }
}
"""
tabler_icon = "coffee"
monaco_contribution = "java"

[debug.run.languages.java.runner]
file_name = "Man.java"
compile_cmd = { binary = "javac", args = [ "Man.java" ] }
run_cmd = { binary = "java", args = [ "Man" ] }

# -- TypeScript

[debug.run.languages.typescript.display]
name = "TypeScript / JavaScript"
default_code = """
console.log("Hello, World!");
"""
tabler_icon = "brand-typescript"
monaco_contribution = "typescript"

[debug.run.languages.typescript.runner]
file_name = "index.ts"
compile_cmd = { binary = "tsc", args = [ "index.ts" ] }
run_cmd = { binary = "node", args = [ "index.js" ] }

# -- Haskell

[debug.run.languages.haskell.display]
name = "Haskell"
default_code = """
main = putStrLn "Hello, World!"
"""
tabler_icon = "lambda"
monaco_contribution = "haskell"

[debug.run.languages.haskell.runner]
file_name = "main.hs"
include_bins = [ "cc" ]
compile_cmd = { binary = "ghc", args = [ "main.hs" ] }
run_cmd = { binary = "./main" }

# -- OCaml

[debug.run.languages.ocaml.display]
name = "OCaml"
default_code = """
print_endline "Hello, World!"
"""
tabler_icon = "hexagon-letter-o"
monaco_contribution = "ocaml" # FIXME: Custom monaco contrib like the one for Haskell?

[debug.run.languages.ocaml.runner]
file_name = "main.ml"
compile_cmd = { binary = "ocamlc", args = [ "main.ml", "-o", "main" ] }
run_cmd = { binary = "./main" }

# -- C#

[debug.run.languages.csharp.display]
name = "C#"
default_code = """
public class Program
{
    public static void Main(string[] args)
    {
        System.Console.WriteLine("Hello, World!");
    }
}
"""
tabler_icon = "brand-c-sharp"
monaco_contribution = "csharp"

[debug.run.languages.csharp.runner]
file_name = "Program.cs"
compile_cmd = { binary = "csc", args = [ "Program.cs" ] }
run_cmd = { binary = "mono", args = [ "Program.exe" ] }

# -- C

[debug.run.languages.c.display]
name = "C"
default_code = """
#include <stdio.h>

int main() {
    printf("Hello, World!");
    return 0;
}
"""
tabler_icon = "letter-c"
monaco_contribution = "c"

[debug.run.languages.c.runner]
file_name = "main.c"
compile_cmd = { binary = "gcc", args = [ "main.c", "-o", "main" ] }
run_cmd = { binary = "./main" }

# -- C++

[debug.run.languages.cpp.display]
name = "C++"
default_code = """
#include <iostream>

int main() {
    std::cout << "Hello, World!" << std::endl;
    return 0;
}
"""
tabler_icon = "brand-cpp"
monaco_contribution = "cpp"

[debug.run.languages.cpp.runner]
file_name = "main.cpp"
compile_cmd = { binary = "g++", args = [ "main.cpp", "-o", "main" ] }
run_cmd = { binary = "./main" }

# -- Go

[debug.run.languages.go.display]
name = "Go"
default_code = """
package main

import "fmt"

func main() {
    fmt.Println("Hello, World!")
}
"""
tabler_icon = "brand-golang"
monaco_contribution = "go"

[debug.run.languages.go.runner]
file_name = "main.go"
compile_cmd = { binary = "go", args = [ "build", "-o", "main", "main.go" ] }
run_cmd = { binary = "./main" }

# -- Lua

[debug.run.languages.lua.display]
name = "Lua"
default_code = """
print("Hello, World!")
"""
tabler_icon = "planet"
monaco_contribution = "lua"

[debug.run.languages.lua.runner]
file_name = "main.lua"
run_cmd = { binary = "lua", args = [ "main.lua" ] }

# -- Perl

[debug.run.languages.perl.display]
name = "Perl"
default_code = """
print "Hello, World!\\n";
"""
tabler_icon = "cactus"
monaco_contribution = "perl"

[debug.run.languages.perl.runner]
file_name = "main.pl"
run_cmd = { binary = "perl", args = [ "main.pl" ] }

# -- Ruby

[debug.run.languages.ruby.display]
name = "Ruby"
default_code = """
puts "Hello, World!"
"""
tabler_icon = "diamond"
monaco_contribution = "ruby"

[debug.run.languages.ruby.runner]
file_name = "main.rb"
run_cmd = { binary = "ruby", args = [ "main.rb" ] }

# -- PHP

[debug.run.languages.php.display]
name = "PHP"
default_code = """
<?php
echo "Hello, World!";
?>
"""
tabler_icon = "brand-php"
monaco_contribution = "php"

[debug.run.languages.php.runner]
file_name = "main.php"
run_cmd = { binary = "php", args = [ "-f", "main.php" ] }

# -- F#

[debug.run.languages.fsharp.display]
name = "F#"
default_code = """
open System

[<EntryPoint>]
let main argv =
    Console.WriteLine("Hello, World!")
    0
"""
tabler_icon = "hexagon-letter-f"
monaco_contribution = "fsharp"

[debug.run.languages.fsharp.runner]
file_name = "main.fs"
compile_cmd = { binary = "fsharpc", args = [ "--standalone", "main.fs" ] }
run_cmd = { binary = "mono", args = [ "main.exe" ] }

# -- R

[debug.run.languages.r.display]
name = "R"
default_code = """
cat("Hello, World!")
"""
tabler_icon = "hexagon-letter-r"
monaco_contribution = "r"

[debug.run.languages.r.runner]
file_name = "main.r"
run_cmd = { binary = "Rscript", args = [ "--vanilla", "main.r" ] }

# -- Julia

[debug.run.languages.julia.display]
name = "Julia"
default_code = """
println("Hello, World!")
"""
tabler_icon = "hexagon-letter-j"
monaco_contribution = "julia"

[debug.run.languages.julia.runner]
file_name = "main.jl"
run_cmd = { binary = "julia", args = [ "-q", "main.jl" ] }
